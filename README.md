ComfyUI 插件，集成多种 AI API 进行专业的图像和视频生成：
- **Nano Banana**: Google Nano Banana 图像生成（支持文生图、图生图）
- **Gemini Banana**: Google Gemini 3 Pro 图像生成（支持文生图、图生图、多图融合）
- **Doubao Seedance**: AI 视频生成（文生视频、图生视频）
- **Doubao Seedream**: AI 图像生成（文生图、图生图、图生组图、多图融合）

## 功能特性

### 🍌 Nano Banana（推荐）
- ✅ **文生图**：根据文本提示生成高质量图片
- ✅ **图生图**：支持单图输入生成新图片
- ✅ **多图参考**：支持 1-4 张图片参考生成
- ✅ **分行提示词**：支持多行提示词批量生成，每行独立处理
- ✅ **并发请求**：真正的并发API请求和图片下载，显著提升性能
- ✅ **匹配参考尺寸**：图生图模式下自动匹配参考图尺寸（智能缩放+居中裁剪）
- ✅ 支持 Nano Banana 2 / Gemini 3 Pro Image 模型
- ✅ 支持 10 种宽高比（1:1, 4:3, 3:4, 16:9, 9:16, 2:3, 3:2, 4:5, 5:4, 21:9）
- ✅ 支持 1K/2K/4K 分辨率选择（仅部分模型支持）
- ✅ 使用 Gemini 原生 API 格式（contents + parts + inline_data）
- ✅ 自动重试机制（智能错误处理）
- ✅ Session 连接池复用，性能优化
- ✅ 独立配置管理
- ✅ 参数自动保存，下次使用更便捷
- ✅ 日志分级控制（详细/精简）

### 🎨 Gemini Banana（推荐）
- ✅ **文生图**：根据文本提示生成高质量图片
- ✅ **图生图**：单图输入生成新图片
- ✅ **多图融合**：融合多张图片生成新图片（最多4张）
- ✅ **分行提示词**：支持多行提示词批量生成，每行独立处理
- ✅ **并发请求**：真正的并发API请求和图片下载，显著提升性能
- ✅ **匹配参考尺寸**：图生图模式下自动匹配参考图尺寸（智能缩放+居中裁剪）
- ✅ **企业级稳定性**：智能尺寸归一化、Session连接池复用、异常自动抛出
- ✅ **日志分级控制**：支持详细/精简两种日志模式
- ✅ 支持 Gemini 3 Pro Image 模型（1K/2K/4K）
- ✅ 支持 10 种宽高比（1:1, 2:3, 3:2, 3:4, 4:3, 4:5, 5:4, 9:16, 16:9, 21:9）
- ✅ 支持 URL 和 Base64 两种响应格式（自动兼容 Data URI）
- ✅ 自动重试机制（智能错误处理）
- ✅ 独立配置管理
- ✅ 参数自动保存，下次使用更便捷
- ✅ 中文参数界面，更友好的用户体验

### 🎬 Doubao Seedance (AI 视频生成)

- ✅ **文生视频**：根据文本提示生成视频
- ✅ **图生视频**：单图或多图生成视频
- ✅ **并发批量生成**：支持相同提示词重复多次生成或多行提示词分行生成
- ✅ **多视频输出**：并发生成多个视频后，所有视频自动保存
- ✅ 支持视频状态查询和轮询
- ✅ 支持多种视频参数（分辨率、帧率、时长等）
- ✅ 自动轮询任务状态
- ✅ 自动下载视频到本地
- ✅ 返回标准 VIDEO 类型
- ✅ **生产级优化**：默认开启 SSL 证书校验，完美支持反代/中转站、状态归一化、懒加载优化

### 🎨 Doubao Seedream (图片生成)
- ✅ **文生图**：根据文本提示生成图片
- ✅ **图生图**：单图输入生成新图片
- ✅ **图生组图**：生成多张相关图片
- ✅ **多图融合**：融合多张图片生成新图片
- ✅ **分行提示词**：支持多行提示词批量生成，每行独立处理
- ✅ **并发请求**：真正的并发API请求和图片下载，显著提升性能
- ✅ **可调重试**：自定义最大重试次数(0-10次)，灵活控制容错策略
- ✅ 支持多种图片尺寸和质量选项

## 安装

1. 将插件文件夹复制到ComfyUI的`custom_nodes`目录
2. 安装依赖：
```bash
pip install -r requirements.txt
```

## 使用方法

### 🍌 Nano Banana（推荐）

**请求示例（Gemini 原生格式）**：
```json
{
  "contents": [
    {
      "parts": [
        {"text": "一只可爱的猫咪，卡通风格，高清"},
        {
          "inline_data": {
            "mime_type": "image/jpeg",
            "data": "<base64_encoded_image>"
          }
        }
      ]
    }
  ],
  "generationConfig": {
    "imageConfig": {
      "aspectRatio": "1:1",
      "imageSize": "2K"
    }
  }
}
```

**参数说明**：

| 参数 | 类型 | 说明 | 可选值 |
|------|------|------|--------|
| `提示词` | STRING | 图片生成的文本描述（支持多行） | 支持中英文 |
| `API密钥` | STRING | API 身份验证密钥 | sk-xxx |
| `API地址` | STRING | API 服务端点 | 默认：https://api.xxx.com |
| `模型` | ENUM | 选择模型 | nano-banana-2 |
| `宽高比` | ENUM | 图片宽高比 | 1:1 / 4:3 / 3:4 / 16:9 / 9:16 / 2:3 / 3:2 / 4:5 / 5:4 / 21:9 |
| `分辨率` | ENUM | 图像分辨率 | none / 1K / 2K / 4K |
| `超时秒数` | INT | API 请求超时时间 | 30-600，默认120 |
| `最大重试次数` | INT | 失败后重试次数 | 1-10，默认3 |
| `并发请求数` | INT | 一次生成的图片数量 | 1-10，默认1 |
| `启用分行提示词` | BOOLEAN | 是否按行拆分提示词 | 默认False |
| `匹配参考尺寸` | BOOLEAN | 是否将输出图片调整为参考图尺寸 | 默认False |
| `详细日志` | BOOLEAN | 是否显示详细调试信息 | 默认False |
| `参考图片1-4` | IMAGE | 可选参考图片 | 用于图生图/多图参考 |

**功能模式**：
1. **文生图**：只填提示词，不提供参考图片
2. **图生图**：提供 1 张参考图片
3. **多图参考**：提供 2-4 张参考图片
4. **批量生成**：启用分行提示词，每行独立处理

**使用示例**：
```
Nano Banana
  ├─ 提示词: "一只可爱的猫咪，卡通风格"
  ├─ 模型: nano-banana-2
  ├─ 宽高比: 16:9
  ├─ 分辨率: 2K
  ├─ 并发请求数: 2
  └─ 图片输出 ──→ SaveImage
```

**批量生成示例**：
```
Nano Banana
  ├─ 提示词: "一只可爱的猫咪，卡通风格
             赛博朋克风格的城市夜景
             海洋深处的神秘生物"
  ├─ 启用分行提示词: True ☑
  ├─ 并发请求数: 3
  └─ 图片输出 ──→ SaveImage (输出9张图片: 3行×3并发)
```

**图生图示例**：
```
Load Image ──→ 参考图片1 (1600×2848)
                 ↓
Nano Banana
  ├─ 提示词: "将这张图片转换为油画风格"
  ├─ 匹配参考尺寸: True ☑
  ├─ 参考图片1: <connected>
  └─ 图片输出 ──→ SaveImage (输出1600×2848)
```

**多图参考示例**：
```
Load Image ──→ 参考图片1
Load Image ──→ 参考图片2
                 ↓
Nano Banana
  ├─ 提示词: "融合这两张图片的风格"
  ├─ 参考图片1: <connected>
  ├─ 参考图片2: <connected>
  └─ 图片输出 ──→ SaveImage
```

**重试机制说明**：
- ✅ **自动重试**：遇到 503/429 等错误自动重试
- ✅ **指数退避**：2秒、4秒、8秒递增等待
- ✅ **智能判断**：4xx 客户端错误（除429）直接失败不浪费重试
- ✅ **详细日志**：显示每次重试的详细信息

---

### 🎨 Gemini Banana（推荐）

**请求示例**：
```json
{
  "model": "gemini-3-pro-image-preview-2k",
  "prompt": "星际穿越，黑洞，电影大片，超现实主义",
  "size": "1:1",
  "n": 1,
  "response_format": "url"
}
```

**参数说明**：

| 参数 | 类型 | 说明 | 可选值 |
|------|------|------|--------|
| `提示词` | STRING | 图片生成的文本描述（支持多行） | 支持中英文 |
| `API密钥` | STRING | API 身份验证密钥 | sk-xxx |
| `API地址` | STRING | API 服务端点 | 默认：https://api.xxx.com |
| `模型` | ENUM | 选择模型 | gemini-3-pro-image-preview / 2k / 4k |
| `宽高比` | ENUM | 图片宽高比 | 1:1 / 2:3 / 3:2 / 3:4 / 4:3 / 4:5 / 5:4 / 9:16 / 16:9 / 21:9 |
| `响应格式` | ENUM | 返回格式 | URL / Base64 |
| `超时秒数` | INT | API 请求超时时间 | 30-600，默认120 |
| `最大重试次数` | INT | 失败后重试次数 | 1-10，默认3 |
| `并发请求数` | INT | 一次生成的图片数量 | 1-10，默认1 |
| `启用分行提示词` | BOOLEAN | 是否按行拆分提示词 | 默认False |
| `匹配参考尺寸` | BOOLEAN | 是否将输出图片调整为参考图尺寸 | 默认False |
| `详细日志` | BOOLEAN | 是否显示详细调试信息 | 默认False |
| `参考图片1-4` | IMAGE | 可选输入图片 | 用于图生图/多图融合 |

**功能模式**：
1. **文生图**：只填提示词，不提供输入图片
2. **图生图**：提供 1 张输入图片
3. **多图融合**：提供 2-4 张输入图片
4. **批量生成**：启用分行提示词，每行独立处理

**使用示例**：
```
Gemini Banana
  ├─ 提示词: "星际穿越，黑洞，电影大片"
  ├─ 模型: gemini-3-pro-image-preview-2k
  ├─ 宽高比: 16:9
  ├─ 并发请求数: 1
  ├─ 响应格式: URL
  └─ 图片输出 ──→ SaveImage
```

**批量生成示例**：
```
Gemini Banana
  ├─ 提示词: "星际穿越，黑洞
             赛博朋克风格，未来城市
             海洋深处，神秘生物"
  ├─ 启用分行提示词: True ☑
  ├─ 并发请求数: 3
  └─ 图片输出 ──→ SaveImage (输出9张图片: 3行×3并发)
```

**图生图示例**：
```
Load Image ──→ 参考图片1 (1600×2848)
                 ↓
Gemini Banana
  ├─ 提示词: "将这张图片转换为油画风格"
  ├─ 匹配参考尺寸: True ☑
  ├─ 参考图片1: <connected>
  └─ 图片输出 ──→ SaveImage (输出1600×2848)
```

**多图融合示例**：
```
Load Image ──→ 图片1
Load Image ──→ 图片2
                 ↓
Gemini Banana
  ├─ 提示词: "融合这两张图片的风格"
  ├─ image1: <connected>
  ├─ image2: <connected>
  └─ 图片输出 ──→ SaveImage
```

**匹配参考尺寸功能**：
- ✅ **触发条件**：启用该开关 + 有输入参考图片
- ✅ **处理方式**：使用第一张参考图的尺寸作为目标，对所有输出图片进行智能缩放+居中裁剪
- ✅ **适用场景**：确保输出图片与参考图尺寸完全一致，便于后续处理
- ✅ **技术细节**：使用 LANCZOS 高质量重采样算法 + ImageOps.fit 居中裁剪
- ⚠️ **注意**：API 请求的 `宽高比` 参数不受影响，仍按选择的比例让模型构图，仅在本地对输出进行调整

**重试机制说明**：
- ✅ **自动重试**：遇到 503/429 等错误自动重试
- ✅ **指数退避**：2秒、4秒、8秒递增等待
- ✅ **智能判断**：4xx 客户端错误（除429）直接失败不浪费重试
- ✅ **详细日志**：显示每次重试的详细信息

---

### 🎬 Doubao Seedance (视频生成)

**功能亮点**：
- ✅ 文生视频、图生视频（单图/多图）
- ✅ **并发批量生成**：支持相同提示词重复生成或多行分行生成
- ✅ **多视频输出**：并发生成的所有视频自动保存
- ✅ 自动轮询任务状态
- ✅ 自动下载视频到 output 目录
- ✅ 返回标准 VIDEO 类型，可直接连接 SaveVideo
- ✅ 支持中断控制（Ctrl+C 或 Stop 按钮）
- ✅ Debug 模式查看完整 API 响应

#### 使用步骤

**1. 添加节点**
在 ComfyUI 中添加：`Doubao Seedance Video`

**重要说明**：本节点会将提示词作为纯文本字段发送给 API，分辨率 / 宽高比 / 时长 / 帧率 / 水印 / 随机种子 / 生成音频等通过各自的参数字段传递，不再拼接到 prompt 文本中。

**参数说明**：

| 参数 | 类型 | 说明 | 可选值 |
|------|------|------|--------|
| `提示词` | STRING | 视频生成的提示词描述（支持多行，可配合“启用提示词分行”功能使用） | 支持中英文 |
| `API密钥` | STRING | API 身份验证密钥 | sk-xxx |
| `API地址` | STRING | API 服务地址 | 默认：https://api.xxx.com |
| `模型` | ENUM | 模型选择 | doubao-seedance-1-5-pro-251215 / doubao-seedance-1-0-pro-fast-251015 / doubao-seedance-1-0-pro-250528 |
| `参考图片1-2` | IMAGE | 可选输入图片 | 图生视频起始帧/结束帧或中间帧 |
| `分辨率` | ENUM | 视频分辨率 | 480p / 720p / 1080p（默认1080p） |
| `宽高比` | ENUM | 视频宽高比 | 16:9 / 4:3 / 1:1 / 3:4 / 9:16 / 21:9 / adaptive（默认16:9） |
| `时长` | INT | 视频时长（秒） | 2-12，默认5 |
| `帧率` | ENUM | 视频帧率 | 24 |
| `随机种子` | INT | 控制生成内容随机性，-1 表示随机，其它为固定种子 | -1 或 [0, 2^32-1] |
| `固定镜头` | BOOLEAN | 是否固定摄像头（仅文生视频支持） | 默认False |
| `水印` | BOOLEAN | 是否在视频中添加水印 | 默认False |
| `生成音频` | BOOLEAN | 是否生成包含画面同步音频的视频（仅 Seedance 1.5 pro 支持） | 默认False |
| `并发请求数` | INT | 同时生成的视频数量 | 1-10，默认1 |
| `启用提示词分行` | BOOLEAN | 是否按行拆分提示词，每行一个任务 | 默认False |
| `轮询间隔` | INT | 查询任务状态的时间间隔（秒） | 2-30，默认10 |
| `超时秒数` | INT | 创建任务请求超时时间（秒） | 60-600，默认60 |
| `最大等待时长` | INT | 最大轮询时间（秒） | 60-3600，默认300 |
| `详细日志` | BOOLEAN | 输出完整 API 请求和响应 | 默认False |
| `忽略SSL证书` | BOOLEAN | 忽略 SSL 证书校验（仅用于调试，不安全） | 默认False |

**4. 输出**
- `视频输出` (VIDEO): 生成的视频 (VideoObject 类型)
  - 单个视频或多个视频列表
  - 自动下载到 `ComfyUI/output/` 目录
  - 文件名格式：`doubao_seedance_<timestamp>.mp4`
  - 可直接连接到 SaveVideo、Preview Video 等节点
- `生成统计` (STRING): 并发模式下的统计信息
  - 总任务数、创建成功数、生成成功数、下载成功数
  - 失败任务数、总耗时

**5. 使用示例**

*文生视频：*
```
Doubao Seedance Video
  ├─ 提示词: "一个机器人在未来城市中行走..."
  ├─ 分辨率: 1080p
  ├─ 宽高比: 16:9
  ├─ 时长: 10
  └─ 视频输出 ──→ SaveVideo
```

*图生视频：*
```
Load Image ──→ 参考图片1
                 ↓
Doubao Seedance Video
  ├─ 提示词: "图片中的场景开始动起来..."
  ├─ 参考图片1: <connected>
  └─ 视频输出 ──→ SaveVideo
```

*并发批量生成（相同提示词）：*
```
Doubao Seedance Video
  ├─ 提示词: "一个机器人在未来城市中行走..."
  ├─ 并发请求数: 3
  ├─ 启用提示词分行: False ☐
  └─ 视频输出 ──→ SaveVideo (输出3个视频)
```

*并发批量生成（提示词分行）：*
```
Doubao Seedance Video
  ├─ 提示词: "一个机器人在未来城市中行走
             赛博朋克风格的城市夜景
             海洋深处的神秘生物"
  ├─ 启用提示词分行: True ☑
  ├─ 并发请求数: 2
  └─ 视频输出 ──→ SaveVideo (输出6个视频: 3行×2并发)
```

*Debug 调试：*
```
Doubao Seedance Video
  ├─ 详细日志: True ☑
  └─ 查看控制台输出完整的请求和响应
```

**6. 并发模式说明**

**三种使用场景：**

1. **单任务模式**：
   - 并发请求数 = 1
   - 启用提示词分行 = False
   - 生成 1 个视频

2. **相同提示词重复模式**：
   - 并发请求数 = 3
   - 启用提示词分行 = False
   - 相同提示词重复 3 次，生成 3 个视频

3. **提示词分行模式**：
   - 启用提示词分行 = True
   - 按换行符拆分提示词，每行一个基础任务
   - 总任务数 = 提示词行数 × 并发请求数
   - 示例：3 行提示词 × 并发请求数 2 = 6 个视频

**并发流程（三阶段）：**

```
阶段 1: 并发创建任务
  ├─ ThreadPoolExecutor 并发调用 API
  ├─ 每个任务获取 task_id
  └─ 返回所有 task_id 列表

阶段 2: 轮询所有任务状态
  ├─ 定时查询所有任务
  ├─ 状态归一化处理
  └─ 直到所有任务完成或失败

阶段 3: 同步下载所有视频
  ├─ 从响应中提取视频 URL
  ├─ 下载到 output 目录
  └─ 返回所有 VideoObject 列表
```

**7. 中断控制**
- 按 `Ctrl+C` 中断视频生成
- 点击 ComfyUI 的 `Stop` 按钮
- 每 0.5 秒检查一次中断信号

**7. VideoObject 类**
返回的 VIDEO 对象提供以下方法：
- `get_dimensions()`: 返回 (width, height)
- `get_fps()`: 返回帧率
- `get_frame_count()`: 返回总帧数
- `get_path()`: 返回文件路径
- `save_to(path)`: 保存视频到指定路径

### 🎨 Doubao Seedream (图片生成)
1. 在ComfyUI中添加节点：`Doubao Seedream Image`

**请求示例**：
```json
{
  "model": "doubao-seedream-4-0-250828",
  "prompt": "星际穿越，黑洞，黑洞里冲出一辆快支离破碎的复古列车",
  "size": "2048x2048",
  "sequential_image_generation": "disabled",
  "stream": false,
  "response_format": "url",
  "watermark": false
}
```

**参数说明**：

| 参数 | 类型 | 说明 | 可选值 |
|------|------|------|--------|
| `提示词` | STRING | 图片生成的文本描述（支持多行） | 支持中英文 |
| `API密钥` | STRING | API 身份验证密钥 | sk-xxx |
| `API地址` | STRING | API 服务端点 | 默认：https://api.xxx.com |
| `模型` | ENUM | 选择模型 | doubao-seedream-4-0-250828 / 4-5-251128 |
| `宽度` | INT | 生成图片的宽度（像素） | 512-4096，步长64 |
| `高度` | INT | 生成图片的高度（像素） | 512-4096，步长64 |
| `输入图片1-2` | IMAGE | 可选输入图片 | 用于图生图/多图融合 |
| `最大图片数量` | INT | 最大生成图片数量 | 0=禁用组图，1-10=生成对应数量 |
| `水印` | BOOLEAN | 是否添加水印 | 默认False |
| `响应格式` | ENUM | 响应格式 | url / b64_json |
| `超时秒数` | INT | API请求超时时间（秒） | 30-600，默认120 |
| `详细日志` | BOOLEAN | 输出完整API请求和响应 | 默认False |
| `并发请求数` | INT | 并发请求的数量 | 1-10，默认1 |
| `最大重试次数` | INT | API请求失败时的最大重试次数 | 0-10，默认3 |
| `启用分行提示词` | BOOLEAN | 是否按行拆分提示词 | 默认False |

**功能模式**：
1. **文生图**：只填提示词，不提供输入图片
2. **图生图**：提供 1 张输入图片
3. **多图融合**：提供 2 张输入图片
4. **图生组图**：设置 `最大图片数量` > 0
5. **批量生成**：启用分行提示词，每行独立处理

**使用示例**：

**文生图**：
```
Doubao Seedream
  ├─ 提示词: "星际穿越，黑洞，电影大片"
  ├─ 模型: doubao-seedream-4-0-250828
  ├─ 宽度: 2048
  ├─ 高度: 2048
  └─ 图片输出 ──→ SaveImage
```

**批量生成（分行提示词 + 并发）**：
```
Doubao Seedream
  ├─ 提示词: "星际穿越，黑洞，复古列车
             赛博朋克风格，未来城市
             海洋深处，神秘生物"
  ├─ 启用分行提示词: True ☑
  ├─ 并发请求数: 3
  └─ 图片输出 ──→ SaveImage (输出9张图片: 3行×3并发)
```

**图生图**：
```
Load Image ──→ 输入图片1
                 ↓
Doubao Seedream
  ├─ 提示词: "将这张图片转换为油画风格"
  ├─ 输入图片1: <connected>
  └─ 图片输出 ──→ SaveImage
```

**组图生成**：
```
Doubao Seedream
  ├─ 提示词: "森林小屋，阳光洒落"
  ├─ 最大图片数量: 5
  └─ 图片输出 ──→ SaveImage (生成5张相关图片)
```

**并发请求说明**：
- ✅ **并发模式**：多个请求同时发送到API，性能提升3-5倍
- ✅ **智能线程池**：自动调整线程数（最多10个并发）
- ✅ **实时统计**：显示成功/失败数量、总耗时、平均耗时
- ✅ **按提示词统计**：分行模式下显示每行的成功率

**启用分行提示词说明**：
- ✅ 启用后，将提示词按行分割，每行作为独立提示词
- ✅ 自动过滤空行，避免无效请求
- ✅ 配合并发：`N行提示词 × M并发 = N×M张图片`
- ✅ 示例：3行提示词 × 3并发 = 9张图片

**重试机制说明**：
- ✅ **自动重试**：遇到 5xx 服务器错误自动重试
- ✅ **指数退避**：2秒、4秒、8秒递增等待（最多30秒）
- ✅ **智能判断**：4xx 客户端错误不重试，避免浪费
- ✅ **灵活配置**：最大重试次数可自定义（0=不重试，1-10=重试对应次数）
- ✅ **详细日志**：显示每次重试的详细信息

**分辨率限制**：

不同模型对分辨率有不同要求：

**doubao-seedream-4-0-250828**：
- 总像素范围：921,600 - 16,777,216（约0.9M - 16M）
- 宽高比范围：1/16 - 16/1
- 常用分辨率：1280×720、1920×1080、2048×2048

**doubao-seedream-4-5-251128**：
- 总像素范围：3,686,400 - 16,777,216（约3.6M - 16M）
- 宽高比范围：1/16 - 16/1
- 常用分辨率：2560×1440、2048×2048、3072×2048

---

### V1版本特点
- 使用`requests`库发送HTTP请求
- 从API响应中提取base64图像数据
- 适合返回base64图像的API服务

### V2版本特点
- 使用`http.client`库（更底层）
- 支持从响应中提取图像URL并自动下载
- 更灵活的URL解析
- 更详细的错误日志
- 适合返回图像URL的API服务

## 依赖

### 核心依赖
- `requests>=2.31.0` - HTTP 请求库（API 调用、图片/视频下载）
- `Pillow>=10.0.0` - 图像处理库（格式转换、编码解码）
- `opencv-python>=4.8.0` - 视频处理库（视频帧提取、元数据读取）
- `torch>=2.0.0` - PyTorch（tensor 操作）*
- `numpy>=1.24.0` - 数值计算库*

\* 注：如果已安装 ComfyUI，通常已包含 torch 和 numpy，无需重复安装

### 快速安装
```bash
# 完整安装
pip install -r requirements.txt

# 或仅安装必需的（ComfyUI 环境）
pip install requests Pillow opencv-python
```

详见 `requirements.txt` 了解更多说明

## 注意事项

### Doubao Seedance 视频生成
1. **轮询机制**：视频生成是异步的，节点会自动轮询任务状态直到完成
2. **下载时间**：视频下载可能需要额外时间，取决于视频大小和网络速度
3. **存储空间**：视频文件保存在 `ComfyUI/output/` 目录，请确保有足够空间
4. **中断恢复**：中断后可通过 Task ID 查询任务状态（日志中会显示）
5. **参数限制**：
   - `resolution=1080p` 不支持参考图场景（图生视频）
   - `camerafixed=true` 仅文生视频支持
   - `ratio=adaptive` 仅图生视频支持

### API 配置
- 所有节点支持自定义 `base_url`，可使用中转站或自建服务
- **Seedance 节点**：默认开启 SSL 证书校验，提升安全性，完美支持反代/中转站/网关场景
- 建议使用环境变量管理 API 密钥

### 性能优化
- **Seedance 视频**：建议设置 `poll_interval=10` 避免频繁请求
- **Seedream 图片**：支持批量生成（`max_images`），比单独生成更高效
- **大视频生成**：增加 `max_poll_time` 避免超时


## 许可证

MIT License

